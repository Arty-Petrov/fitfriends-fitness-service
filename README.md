# Fitfriends
Проект создан на микросервисной архитектуре.
## Ресурсы проектa
1. Файлы HTTP запросов находятся в папке fitfriends/apps/api-gateway/src/app/controllers
1. Пример файла с переменными окружения fitfriends/envs/.env-example
1. Документация доступна по адресу http://localhost:3333/spec после запуска сервиcа api-gateway
1. Список микросервисов:
    - api-gateway — содердит http контроллеры
    - users — отвечает за авторизацию, хранение сессий, пользователей и друзей
    - fitness — содержит бизнес логику приложения
    - storage — отвечает за обработку файлов
1. Списки сценариев для микросервисов:
    - serve — запускает сервис, доступен для всех сервисов.
1. Сценарии для сервиса fitness
    - db-reset — делает перестановку клиента prisma
    - db-generate — генерирует клиента в соответствие со схемой
    - db-migrate — осуществляет миграцию БД
1. Запусук сценариев осуществляется через `nx run <название сервиса>:<название сценария>`
1. Сценарии командной строки:
    - `services:docker-up`  — загрузит и сконфигурирует контейнеры docker 
    - `services:docker-start` — запустит все контейнеры
    - `services:docker-stop` — остановит все контейнеры
    - `services:db-init` — проинициализирует prisma 
    - `services:db-seed` — заполнит базы данных тестовыми данными
    - `services:db-reset` — очистит базы данных
    - `services:start` — запустит все микросервисы
- Команда герерации тестовых данных создает две учетные записи: 
  `coach@fitfriends.local` — роль тренера
  `customer@fitfriends.local` — роль клиента
  Пароль для всех учетоных записей: `123456`

## Порядок действий для запуска проекта
- Создайте файл .env в папке fitfriends/envs/ обновите переменные окружения по образцу в файле .env-example
- Установите зависимости `npm i`
- Установите docker
- В директории ./fitfriends запустите сценарии в следующем порядке:
    4.1 `npm run servisec:docker-up`
    4.2 `npm run services:docker-start`
    4.3 `npm run services:start`
  Перейдите в другое окно терминала
    4.4 `npm run services:db-init`
    4.5 `services:seed`
